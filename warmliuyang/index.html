<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="温暖浏阳">
    <meta name="keywords" content="浏阳,烟花,共治,便民服务,温暖">
    <title>温暖浏阳 - 发现浏阳的每个小惊喜</title>
    
    <!-- PWA支持 -->
    <meta name="theme-color" content="#E55C27">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="温暖浏阳">
    
    <!-- 字体 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- 通用样式文件（需在页面样式之前引入） -->
    <link rel="stylesheet" href="common.css">
    <!-- 页面样式文件 -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- 主内容区域 -->
        <main class="main-content">
            <!-- 首页 -->
            <div id="home-tab" class="tab-content active">
                <div class="home-header">
                    <div class="location-weather">
                        <span>📍 浏阳市区</span>
                        <span>☀️ 24°C</span>
                    </div>
                    <input type="text" class="search-box" id="searchBox" placeholder="🔍 发现浏阳的每个小惊喜">
                </div>
                
                <div class="banner-carousel">
                    <div class="carousel-container">
                        <div class="carousel-slide active">
                            <img src="sources/fireworks1.jpeg" alt="浏阳烟花秀1" class="banner-image">
                            <div class="banner-overlay">
                                <div class="banner-text">🎆 烟火秀倒计时 | 主题征集活动</div>
                            </div>
                        </div>
                        <div class="carousel-slide">
                            <img src="sources/fireworks2.jpeg" alt="浏阳烟花秀2" class="banner-image">
                            <div class="banner-overlay">
                                <div class="banner-text">✨ 璀璨烟花 | 点亮浏阳夜空</div>
                            </div>
                        </div>
                        <div class="carousel-slide">
                            <img src="sources/fireworks3.jpeg" alt="浏阳烟花秀3" class="banner-image">
                            <div class="banner-overlay">
                                <div class="banner-text">🌟 烟花之都 | 世界级视觉盛宴</div>
                            </div>
                        </div>
                        <div class="carousel-slide">
                            <img src="sources/fireworks4.jpeg" alt="浏阳烟花秀4" class="banner-image">
                            <div class="banner-overlay">
                                <div class="banner-text">🎇 传承工艺 | 匠心独运</div>
                            </div>
                        </div>
                        <div class="carousel-slide">
                            <img src="sources/fireworks5.jpeg" alt="浏阳烟花秀5" class="banner-image">
                            <div class="banner-overlay">
                                <div class="banner-text">🎊 节庆烟花 | 共庆佳节</div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-indicators">
                        <span class="indicator active" data-slide="0"></span>
                        <span class="indicator" data-slide="1"></span>
                        <span class="indicator" data-slide="2"></span>
                        <span class="indicator" data-slide="3"></span>
                        <span class="indicator" data-slide="4"></span>
                    </div>
                </div>
                
                <div class="quick-services">
                    <div class="service-grid">
                        <div class="service-item" data-service="parking">
                            <div class="service-icon">🅿️</div>
                            <div class="service-label">找车位</div>
                        </div>
                        <div class="service-item" data-service="toilet">
                            <div class="service-icon">🚻</div>
                            <div class="service-label">找厕所</div>
                        </div>
                        <div class="service-item" data-service="fireworks">
                            <div class="service-icon">🎆</div>
                            <div class="service-label">烟火秀</div>
                        </div>
                        <div class="service-item" data-service="report">
                            <div class="service-icon">📷</div>
                            <div class="service-label">随手拍</div>
                        </div>
                        <div class="service-item" data-service="food">
                            <div class="service-icon">🍜</div>
                            <div class="service-label">地道菜</div>
                        </div>
                        <div class="service-item" data-service="transport">
                            <div class="service-icon">🚌</div>
                            <div class="service-label">公交</div>
                        </div>
                        <div class="service-item" data-service="attractions">
                            <div class="service-icon">📍</div>
                            <div class="service-label">打卡景点</div>
                        </div>
                        <div class="service-item" data-service="more">
                            <div class="service-icon">➕</div>
                            <div class="service-label">更多</div>
                        </div>
                    </div>
                </div>
                
                <div class="feed-tabs">
                    <div class="feed-tab active" data-feed="recommend">推荐</div>
                    <div class="feed-tab" data-feed="follow">关注</div>
                </div>
                
                <div class="feed-list" id="feedList">
                    <!-- 动态内容将通过JavaScript加载 -->
                </div>
            </div>

            <!-- 服务页面 -->
            <div id="service-tab" class="tab-content">
                <div class="service-header">
                    便民服务
                </div>
                
                <!-- 服务筛选标签 -->
                <div class="service-filter-tabs">
                    <div class="filter-tab active" data-filter="all">全部</div>
                    <div class="filter-tab" data-filter="parking">找车位</div>
                    <div class="filter-tab" data-filter="toilet">找厕所</div>
                    <div class="filter-tab" data-filter="food">地道菜</div>
                    <div class="filter-tab" data-filter="scenic">打卡景点</div>
                </div>
                
                <div class="map-container">
                    <img src="sources/map1.png" alt="浏阳市地图" class="map-image">
                    <div class="map-overlay">
                        <div class="map-controls">
                            <button class="map-btn">📍 定位</button>
                            <button class="map-btn">🔍 搜索</button>
                        </div>
                    </div>
                </div>
                
                <div class="service-list" id="serviceList">
                    <!-- 服务列表将通过JavaScript加载 -->
                </div>
            </div>

            <!-- 烟火秀页面 -->
            <div id="fireworks-tab" class="tab-content">
                <div class="fireworks-header">
                    <div class="countdown-timer" id="countdown">加载中...</div>
                    <div class="countdown-label">距离下次烟火秀</div>
                </div>
                
                <div class="viewing-spots">
                    <h2 class="spots-title">最佳观赏点</h2>
                    
                    <div class="spot-card">
                        <div class="spot-info">
                            <h3>浏阳河畔观景台</h3>
                            <div class="spot-type">场外观赏点 • 免费</div>
                        </div>
                        <button class="ticket-btn">导航前往</button>
                    </div>
                    
                    <div class="spot-card">
                        <div class="spot-info">
                            <h3>市民广场VIP区</h3>
                            <div class="spot-type">场内座位 • ¥88</div>
                        </div>
                        <button class="ticket-btn">立即购票</button>
                    </div>
                    
                    <div class="spot-card">
                        <div class="spot-info">
                            <h3>烟花大桥观景点</h3>
                            <div class="spot-type">场外观赏点 • 免费</div>
                        </div>
                        <button class="ticket-btn">导航前往</button>
                    </div>
                </div>
                
                <div class="past-shows">
                    <h2 class="spots-title">往期精彩</h2>
                    <div class="video-grid">
                        <div class="video-item">
                            <img src="sources/last1.jpeg" alt="上周烟火秀" class="video-thumbnail">
                            <div class="video-overlay">
                                <div class="video-title">上周烟火秀</div>
                            </div>
                        </div>
                        <div class="video-item">
                            <img src="sources/last2.jpeg" alt="国庆特别版" class="video-thumbnail">
                            <div class="video-overlay">
                                <div class="video-title">国庆特别版</div>
                            </div>
                        </div>
                        <div class="video-item">
                            <img src="sources/last3.jpeg" alt="中秋烟火夜" class="video-thumbnail">
                            <div class="video-overlay">
                                <div class="video-title">中秋烟火夜</div>
                            </div>
                        </div>
                        <div class="video-item">
                            <img src="sources/last4.jpeg" alt="夏日烟花节" class="video-thumbnail">
                            <div class="video-overlay">
                                <div class="video-title">夏日烟花节</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 共治页面 -->
            <div id="governance-tab" class="tab-content">
                <div class="governance-header">
                    共建共治
                </div>
                
                <!-- 城管温馨提示 -->
                <div class="notices-section">
                    <div class="notices-header">
                        <div class="notices-title">
                            <span class="notices-icon">📢</span>
                            <span class="notices-text">浏阳城管温馨提示❗️</span>
                        </div>
                        <button class="notices-expand-btn" id="noticesExpandBtn">
                            <span class="expand-text">展开</span>
                            <span class="expand-icon">▼</span>
                        </button>
                    </div>
                    <div class="notices-list">
                        <div class="notice-item" data-notice-id="0">
                            <div class="notice-content">
                                <div class="notice-title">违停占道请及时驶离</div>
                                <div class="notice-location">📍 锦城大道人行道</div>
                            </div>
                            <div class="notice-arrow">›</div>
                        </div>
                        <div class="notice-item notice-item-hidden" data-notice-id="1">
                            <div class="notice-content">
                                <div class="notice-title">人流密集请注意安全</div>
                                <div class="notice-location">📍 集里街道菜市场</div>
                            </div>
                            <div class="notice-arrow">›</div>
                        </div>
                        <div class="notice-item notice-item-hidden" data-notice-id="2">
                            <div class="notice-content">
                                <div class="notice-title">道路积水请绕道行驶</div>
                                <div class="notice-location">📍 淮川街道天桥底下</div>
                            </div>
                            <div class="notice-arrow">›</div>
                        </div>
                    </div>
                </div>
                
                <!-- 公益任务发布 -->
                <div class="tasks-section">
                    <div class="tasks-header">
                        <div class="tasks-title">
                            <span class="tasks-icon">🎯</span>
                            <span class="tasks-text">浏阳城管公益任务发布💝</span>
                        </div>
                        <button class="tasks-expand-btn" id="tasksExpandBtn">
                            <span class="expand-text">展开</span>
                            <span class="expand-icon">▼</span>
                        </button>
                    </div>
                    <div class="tasks-list">
                        <div class="task-item" data-task-id="0">
                            <div class="task-content">
                                <div class="task-title">"添双筷子"公益餐活动</div>
                                <div class="task-reward">🏆 每份餐食 5-7 贡献点数</div>
                            </div>
                            <div class="task-arrow">›</div>
                        </div>
                        <div class="task-item" data-task-id="1">
                            <div class="task-content">
                                <div class="task-title">"邻里共享"车位开放计划</div>
                                <div class="task-reward">🏆 每小时 3-5 贡献点数</div>
                            </div>
                            <div class="task-arrow">›</div>
                        </div>
                        <div class="task-item" data-task-id="2">
                            <div class="task-content">
                                <div class="task-title">"随手拍"城市问题上报</div>
                                <div class="task-reward">🏆 每次上报 2-3 贡献点数</div>
                            </div>
                            <div class="task-arrow">›</div>
                        </div>
                        <div class="task-item task-item-hidden" data-task-id="3">
                            <div class="task-content">
                                <div class="task-title">"便民开放"共享厕所计划</div>
                                <div class="task-reward">🏆 每月 4-6 贡献点数</div>
                            </div>
                            <div class="task-arrow">›</div>
                        </div>
                        <div class="task-item task-item-hidden" data-task-id="4">
                            <div class="task-content">
                                <div class="task-title">"邻里互助"温暖行动</div>
                                <div class="task-reward">🏆 每次互助 2-4 贡献点数</div>
                            </div>
                            <div class="task-arrow">›</div>
                        </div>
                    </div>
                </div>

                <!-- <div class="governance-actions">
                    <div class="governance-card">
                        <div class="governance-icon">📷</div>
                        <div class="governance-title">随手拍</div>
                        <div class="governance-desc">发现问题，随手上报</div>
                    </div>
                    
                    <div class="governance-card">
                        <div class="governance-icon">🅿️</div>
                        <div class="governance-title">共享车位</div>
                        <div class="governance-desc">分享闲置车位</div>
                    </div>
                    
                    <div class="governance-card">
                        <div class="governance-icon">🚻</div>
                        <div class="governance-title">共享厕所</div>
                        <div class="governance-desc">开放商户厕所</div>
                    </div>
                    
                    <div class="governance-card">
                        <div class="governance-icon">🍜</div>
                        <div class="governance-title">公益餐</div>
                        <div class="governance-desc">添双筷子献爱心</div>
                    </div>
                </div> -->
                
                <div class="leaderboard">
                    <h2 class="leaderboard-title">🏆 城市温暖之星</h2>
                    <div id="leaderboard">
                        <!-- 排行榜将通过JavaScript加载 -->
                    </div>
                </div>
            </div>

            <!-- 我的页面 -->
            <div id="profile-tab" class="tab-content">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <img src="sources/avator.jpg" alt="用户头像" class="avatar-image">
                    </div>
                    <div class="profile-name">温暖市民</div>
                    <div class="badge-wall">
                        <span class="badge">烟火达人</span>
                        <span class="badge">共治之星</span>
                        <span class="badge">美食捕手</span>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="volunteerHours">24</div>
                        <div class="stat-label">贡献点数</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="parkingIncome">156</div>
                        <div class="stat-label">共享收益(元)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="storyLikes">89</div>
                        <div class="stat-label">分享获赞</div>
                    </div>
                </div>
                
                <div class="menu-list">
                    <div class="menu-item">
                        <div class="menu-icon">📅</div>
                        <div class="menu-text">我的预约</div>
                        <div class="menu-arrow">›</div>
                    </div>
                    
                    <div class="menu-item">
                        <div class="menu-icon">❤️</div>
                        <div class="menu-text">我的收藏</div>
                        <div class="menu-arrow">›</div>
                    </div>
                    
                    <div class="menu-item">
                        <div class="menu-icon">📊</div>
                        <div class="menu-text">数据统计</div>
                        <div class="menu-arrow">›</div>
                    </div>
                    
                    <div class="menu-item">
                        <div class="menu-icon">⚙️</div>
                        <div class="menu-text">设置</div>
                        <div class="menu-arrow">›</div>
                    </div>
                    
                    <div class="menu-item">
                        <div class="menu-icon">ℹ️</div>
                        <div class="menu-text">关于我们</div>
                        <div class="menu-arrow">›</div>
                    </div>
                </div>
            </div>
        </main>

        <!-- 悬浮按钮 -->
        <button class="fab" id="fab" aria-label="发布内容">
            ➕
        </button>

        <!-- 底部导航栏 -->
        <nav class="bottom-nav">
            <div class="nav-item active" data-tab="home" role="button" tabindex="0" aria-label="首页">
                <div class="nav-icon">🏠</div>
                <div class="nav-label">发现</div>
            </div>
            <div class="nav-item" data-tab="service" role="button" tabindex="0" aria-label="服务">
                <div class="nav-icon">🛠️</div>
                <div class="nav-label">便民</div>
            </div>
            <div class="nav-item" data-tab="fireworks" role="button" tabindex="0" aria-label="烟火秀">
                <div class="nav-icon">🎆</div>
                <div class="nav-label">烟火秀</div>
            </div>
            <div class="nav-item" data-tab="governance" role="button" tabindex="0" aria-label="共治">
                <div class="nav-icon">🤝</div>
                <div class="nav-label">共治</div>
            </div>
            <div class="nav-item" data-tab="profile" role="button" tabindex="0" aria-label="我的">
                <div class="nav-icon">👤</div>
                <div class="nav-label">我的</div>
            </div>
        </nav>
    </div>

    <!-- 故事详情页面 -->
    <div id="storyDetail" class="story-detail-page" style="display: none;">
        <div class="story-detail-header">
            <button class="back-btn" id="storyBackBtn">
                <span class="back-icon">←</span>
                <span class="back-text">返回</span>
            </button>
            <div class="story-detail-title">故事详情</div>
        </div>
        <div class="story-detail-content">
            <div class="story-detail-image">
                <img id="storyDetailImage" src="" alt="故事图片" class="story-image">
            </div>
            <div class="story-detail-info">
                <h2 id="storyDetailTitle" class="story-title"></h2>
                <div id="storyDetailLocation" class="story-location"></div>
                <div id="storyDetailDescription" class="story-description"></div>
                <div class="story-meta">
                    <div class="story-author">
                        <div class="author-avatar">👤</div>
                        <div class="author-name">温暖浏阳用户</div>
                    </div>
                    <div class="story-time">刚刚</div>
                </div>
                <div class="story-actions">
                    <button class="story-action-btn like-btn">
                        <span class="action-icon">❤️</span>
                        <span class="action-text">点赞</span>
                    </button>
                    <button class="story-action-btn share-btn">
                        <span class="action-icon">📤</span>
                        <span class="action-text">分享</span>
                    </button>
                    <button class="story-action-btn comment-btn">
                        <span class="action-icon">💬</span>
                        <span class="action-text">评论</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 通知详情页面 -->
    <div id="noticeDetail" class="notice-detail-page" style="display: none;">
        <div class="notice-detail-header">
            <button class="back-btn" id="noticeBackBtn">
                <span class="back-icon">←</span>
                <span class="back-text">返回</span>
            </button>
            <div class="notice-detail-title">浏阳城管温馨提示</div>
        </div>
        <div class="notice-detail-content">
            <div class="notice-detail-info">
                <h2 id="noticeDetailTitle" class="notice-title-large"></h2>
                <div id="noticeDetailLocation" class="notice-location-large"></div>
                <div id="noticeDetailDescription" class="notice-description"></div>
                <div class="notice-footer">
                    <div class="notice-source">浏阳市城市管理和综合执法局</div>
                    <div class="notice-time">刚刚发布</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 公益任务详情页面 -->
    <div id="taskDetail" class="task-detail-page" style="display: none;">
        <div class="task-detail-header">
            <button class="back-btn" id="taskBackBtn" onclick="app.closeTaskDetail()">
                <span class="back-icon">←</span>
                <span class="back-text">返回</span>
            </button>
            <div class="task-detail-title">公益任务详情</div>
        </div>
        <div class="task-detail-content">
            <div class="task-detail-info">
                <div class="task-icon-large" id="taskDetailIcon">🍽️</div>
                <h2 id="taskDetailTitle" class="task-title-large"></h2>
                <div class="task-reward-large" id="taskDetailReward"></div>
                <div class="task-section">
                    <h3 class="task-section-title">活动描述</h3>
                    <div id="taskDetailDescription" class="task-description"></div>
                </div>
                <div class="task-section">
                    <h3 class="task-section-title">参与方式</h3>
                    <div id="taskDetailParticipation" class="task-participation"></div>
                </div>
                <div class="task-footer">
                    <div class="task-source">浏阳市城市管理和综合执法局</div>
                    <div class="task-time">长期有效</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 城市温暖之星详情页面 -->
    <div id="warmStarDetail" class="warm-star-detail-page" style="display: none;">
        <!-- 头部导航 -->
        <div class="warm-star-detail-header">
            <button class="back-btn" id="warmStarBackBtn" onclick="app.closeWarmStarDetail()">
                <span class="back-icon">←</span>
                <span class="back-text">返回</span>
            </button>
            <div class="warm-star-detail-title">城市温暖之星</div>
            <div class="header-placeholder"></div>
        </div>

        <!-- 个人信息卡片 -->
        <div class="warm-star-profile">
            <div class="profile-background">
                <div class="profile-gradient"></div>
            </div>
            <div class="profile-content">
                <div class="profile-avatar-container">
                    <img id="warmStarAvatar" src="sources/avator1.png" alt="温暖之星头像" class="profile-avatar">
                    <div class="rank-badge">
                        <span id="warmStarRank">第1名</span>
                    </div>
                </div>
                <div class="profile-info">
                    <h1 id="warmStarName" class="profile-name">热心市民王大妈</h1>
                    <div class="profile-stats">
                        <div class="stat-item">
                            <div class="stat-number" id="warmStarTotalContribution">156</div>
                            <div class="stat-label">总贡献点数</div>
                        </div>
                        <div class="stat-divider"></div>
                        <div class="stat-item">
                            <div class="stat-text" id="warmStarJoinDate">2023年3月</div>
                            <div class="stat-label">加入时间</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 徽章墙 -->
        <div class="badges-section">
            <h2 class="section-title">🏆 荣誉徽章</h2>
            <div id="warmStarBadges" class="badges-container">
                <!-- 徽章将通过JavaScript动态加载 -->
            </div>
        </div>

        <!-- 个人简介 -->
        <div class="bio-section">
            <h2 class="section-title">📝 个人简介</h2>
            <div class="bio-content">
                <p id="warmStarBio" class="bio-text">
                    <!-- 个人简介将通过JavaScript动态加载 -->
                </p>
            </div>
        </div>

        <!-- 近期活动 -->
        <div class="activities-section">
            <h2 class="section-title">📊 近期活动</h2>
            <div id="warmStarActivities" class="activities-container">
                <!-- 活动列表将通过JavaScript动态加载 -->
            </div>
        </div>

        <!-- 互动按钮 -->
        <div class="action-buttons">
            <button class="action-btn primary-btn" onclick="app.followWarmStar()">
                <span class="btn-icon">👥</span>
                <span class="btn-text">关注TA</span>
            </button>
            <button class="action-btn secondary-btn" onclick="app.shareWarmStar()">
                <span class="btn-icon">📤</span>
                <span class="btn-text">分享</span>
            </button>
            <button class="action-btn secondary-btn" onclick="app.sendMessage()">
                <span class="btn-icon">💬</span>
                <span class="btn-text">私信</span>
            </button>
        </div>

        <!-- 底部安全区域 -->
        <div class="bottom-safe-area"></div>
    </div>

    <!-- JavaScript文件 -->
    <script src="app.js"></script>
</body>
</html>